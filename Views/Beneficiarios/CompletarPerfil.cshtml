@model BeneficiarioViewModel
@if (ViewBag.Errores != null)
{

}
@{
    ViewData["Title"] = "Index beneficiario";
    Layout = ViewBag.Layout ?? "_LayoutBeneficario";
}

<h2>Completar perfil</h2>

<form asp-action="CompletarPerfil" asp-controller="Beneficiarios" method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" asp-for="Id_Beneficiario" />
    <div class="form-group mb-3">
        <label asp-for="Dui"></label>
        <input asp-for="Dui" class="form-control" placeholder="Ingresa el DUI con guion Ejem: 12345678-9" id="DuiInput" maxlength="10" autocomplete="off"/>
        <span asp-validation-for="Dui" class="text-danger"></span>
    </div>

    <div class="form-group mb-3">
        <label asp-for="Telefono"></label>
        <input asp-for="Telefono" class="form-control" placeholder = "Ejemplo: 75658457"/>
        <span asp-validation-for="Telefono" class="text-danger"></span>
    </div>

    <div class="form-group mb-3">
        <label asp-for="Direccion"></label>
        <textarea asp-for="Direccion" class="form-control" placeholder="Ejem: Colonia Escalon, San Salvador"></textarea>
        <span asp-validation-for="Direccion" class="text-danger"></span>
    </div>

    <div class="form-group mb-3">
        <label class="form-label d-block">Género</label>
        <div class="btn-group" role="group" aria-label="Género">
            <input type="radio" class="btn-check" asp-for="Genero" id="generoMasculino" value="Masculino"
                autocomplete="off">
            <label class="btn btn-outline-primary" for="generoMasculino">
                <i class="fas fa-mars me-1"></i> Masculino
            </label>

            <input type="radio" class="btn-check" asp-for="Genero" id="generoFemenino" value="Femenino"
                autocomplete="off">
            <label class="btn btn-outline-danger" for="generoFemenino">
                <i class="fas fa-venus me-1"></i> Femenino
            </label>
        </div>
        <span asp-validation-for="Genero" class="text-danger d-block mt-2"></span>
    </div>

    <div class="form-group mb-3">
        <label asp-for="FechaNacimiento" class="form-label"></label>
        <input asp-for="FechaNacimiento" class="form-control" type="date" value="@DateTime.Now.ToString("yyyy-MM-dd")"
            max="@DateTime.Now.ToString("yyyy-MM-dd")" />
        <span asp-validation-for="FechaNacimiento" class="text-danger"></span>
    </div>



    <button type="submit" class="btn btn-success">Guardar cambios</button>
    <a asp-action="Index" class="btn btn-secondary">Cancelar</a>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
     <script>
        const duiInput = document.getElementById("DuiInput");

        duiInput.addEventListener("input", function () {
            // Quitamos guiones para evitar fallos
            let value = this.value.replace(/-/g, "");

            // Solo números
            value = value.replace(/\D/g, "");

            // Insertamos el guion automáticamente al llegar a 9 dígitos
            if (value.length > 8) {
                value = value.slice(0, 8) + "-" + value.slice(8, 9);
            }

            this.value = value;
        });
    </script>
}